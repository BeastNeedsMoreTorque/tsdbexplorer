<%= calendar_for date_array, :html => { :class => 'condensed-table bordered-table', :id => 'foo' }, :year => date.year, :month => date.month do |calendar| %>
 <%= calendar.head('Su', 'M', 'T', 'W', 'Th', 'F', 'S') %>
 <h4><%= date.strftime('%B %Y') %></h4>
 <%= calendar.day(:day_method => :date, :class => 'table') do |date, schedule| %>
  <%= date.day %><br />
  <% unless schedule.length == 0 %>
   <%= content_tag 'span', :class => ("label " + { 'C' => 'important', 'N' => 'success', 'O' => 'warning', 'P' => 'success' }[schedule.first.type]) do %>
    <%= link_to schedule.first.type, :action => 'schedule_by_uid_and_run_date', :year => date.year, :month => date.month.to_s.rjust(2, '0'), :day => date.day.to_s.rjust(2, '0')  %>
   <% end %>
  <% end %>
 <% end %>
<% end %>
