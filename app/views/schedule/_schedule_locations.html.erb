<% if @schedule.is_a_train? %>
 <div class="alert-message info">Real-time information is not yet available for this train.</div>
<% end %>

<table id="schedule">

<% if session[:mode] == 'advanced' %>

 <thead>
  <tr>
   <th style="text-align: left;">Location</th>
   <th>Pfm</th>
   <th>Line</th>
   <th>Path</th>
   <th>Arrival (Public)</th>
   <th>Pass</th>
   <th>Departure (Public)</th>
   <th>Eng</th>
   <th>Path</th>
   <th>Perf</th>
  </tr>
 </thead>
 <tbody>
  <% @schedule.locations.each do |l| %>
   <%= tag :tr, :style => l.pass.nil? ? nil : 'background: #eee;' %>
    <td><%= tidy_text(decode_tiploc(l)) %></td>
    <td><%=raw l.platform %></td>
    <td><%= l.line %></td>
    <td><%= l.path %></td>
    <td><%= raw tidy_wtt_time(l.arrival) if l.arrival? %><% if l.public_arrival %>&nbsp;(<%= l.public_arrival %>)<% end %></td>
    <td><%= l.pass %></td>
    <td><%= raw tidy_wtt_time(l.departure) if l.departure? %><% if l.public_departure %>&nbsp;(<%= l.public_departure %>)<% end %></td>
    <td><%= l.engineering_allowance %></td>
    <td><%= l.pathing_allowance %></td>
    <td><%= l.performance_allowance %></td>
   </tr>
  <% end %>
 </tbody>

<% else %>

 <thead>
  <tr>
   <th>Location</th>
   <th>Platform</th>
   <th>Arrives</th>
   <th>Departs</th>
  </tr>
 </thead>
 <tbody>
  <% @schedule.locations.each do |l| %>
   <% if l.is_public? %>
   <tr>
    <td style="text-align: left;"><%= tidy_text(decode_tiploc(l)) %></td>
    <td><%=raw l.platform || "&nbsp;" %></td>
    <td><%= l.public_arrival %></td>
    <td><%= l.public_departure %></td>
   </tr>
   <% end %>
  <% end %>
 </tbody>

<% end %>

</table>
